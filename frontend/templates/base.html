<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{template "title" .}} - Itchan</title>
    <link rel="preload" href="/static/css/style.css" as="style">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="shortcut icon" href="/favicon.ico"> <!-- Add favicon link -->
</head>
<body{{if .Common.NoMedia}} class="no-media"{{end}}>
    <header class="site-header">
        <div class="header-content">
            <div class="header-left">
                 <h1 class="site-title"><a href="/">Itchan</a></h1>
            </div>
            <div class="auth-links">
                [<a href="/">Home</a>]
                [<a href="/faq">FAQ</a>]
                {{if .Common.User}}
                    <span class="user-info">[<a href="/account">@{{.Common.User.EmailDomain}}</a>]</span>
                    [<a href="/invites">Invites</a>]
                    [<a href="/settings/no-media">{{if .Common.NoMedia}}Show Media{{else}}No Media{{end}}</a>]
                    {{if .Common.User.Admin}}[<a href="/admin">Admin</a>]{{end}}
                    [<a href="/logout">Logout</a>]
                {{else}}
                    [<a href="/login">Login</a>]
                    [<a href="/register">Register</a>]
                    [<a href="/register_invite">Register with Invite</a>]
                {{end}}
            </div>
        </div>
    </header>

    <main class="content">
        {{/* Global flash messages - displayed once and automatically removed on page load */}}
        {{if .Common.Error}}
        <div class="error-message">{{.Common.Error}}</div>
        {{end}}
        {{if .Common.Success}}
        <div class="success-message">{{.Common.Success}}</div>
        {{end}}

        {{template "content" .}}
    </main>

    <footer class="site-footer">
        <div class="footer-info">
            <p>All trademarks and copyrights on this page are owned by their respective parties. Images uploaded are the responsibility of the Poster.</p>
            <p class="footer-links">
                [<a href="/about">О проекте</a>]
                [<a href="/terms">Пользовательское соглашение</a>]
                [<a href="/privacy">Политика конфиденциальности</a>]
                [<a href="/contacts">Контакты</a>]
                [<a href="https://github.com/itchan-dev/itchan" target="_blank" rel="noopener noreferrer">GitHub</a>]
                [18+]
            </p>
        </div>
    </footer>

    <script src="/static/js/main.js"></script>
</body>
</html>
